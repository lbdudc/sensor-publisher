/*% if (feature.MWM_TE_VisitsRecord) { %*/
<template>
  <v-data-table
    :headers="statisticsHeaders"
    :items="statisticsData"
    :sort-by.sync="sortBy"
    :sort-desc.sync="sortDesc"
    :items-per-page="hideFooter ? -1 : 5"
    :hide-default-footer="hideFooter"
    dense
  >
    <template v-slot:[`item.client`]="{ item }">
      <router-link
        v-if="item.client && item.client.active"
        :to="{ name: 'ClientDetail', params: { id: item.client.id, backPrevious: true } }"
      >
        {{ item.client.fullName }}
      </router-link>
      <span v-else>
        {{ item.client.fullName }}
      </span>
    </template>
    /*% if (feature.MVM_VT_WithTime) { %*/
    <template v-slot:[`item.plannedTime`]="{ item }">
      {{ formatToDHM(item.plannedTime) }}
    </template>
    /*% } %*/
  </v-data-table>
</template>

<script>
/*% if (feature.MVM_VT_WithTime) { %*/
import { formatToDHM } from "@/common/conversion-utils";
/*% } %*/

export default {
  name: "ClientsStatisticsTable",
  props: ["statisticsData", "sortable", "hideFooter"],
  data() {
    return {
      colors: {},
      sortBy: "client",
      sortDesc: false,
      isSortable: this.sortable
    };
  },
  computed: {
    statisticsHeaders() {
      return [
        {
          text: this.$t("trajectory_exploitation.client"),
          value: "client"
        },
        {
          text: this.$t("trajectory_exploitation.visits_record.visits"),
          value: "visitsNumber"
        }/*% if (feature.MVM_VT_WithTime) { %*/,
        {
          text: this.$t("trajectory_exploitation.visits_record.planned_time"),
          value: "plannedTime"
        }/*% } %*/
      ];
    }
  }/*% if (feature.MVM_VT_WithTime) { %*/,
  methods: {
    formatToDHM(duration) {
      if (duration != null) {
        return formatToDHM(duration, true, true);
      }
    }
  }/*% } %*/
};
</script>
/*% } %*/
